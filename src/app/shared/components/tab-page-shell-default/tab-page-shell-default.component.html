<app-tab-page-shell
  [title]="title"
  [showTitle]="showTitle"
  [backgroundVariant]="backgroundVariant"
  [imageName]="imageName"
  [overlayOpacity]="overlayOpacity"
  [showBack]="showBack"
  (backClicked)="onBack()">

  <!-- Header Right: Action slot + Avatar (automatico) -->
  <div shellHeaderRight class="shell-default-header-right">
    <ng-content select="[shellHeaderAction]"></ng-content>
    <app-avatar-button [mode]="avatarMode" />
  </div>

  <!-- Branding: Logo + Extra Content (dentro blu) -->
  <div shellBranding class="shell-default-branding">
    <app-logo variant="color" class="shell-default-branding__logo" />
    <!-- Slot per contenuto extra (es. data in calendar) -->
    <ng-content select="[shellBrandingExtra]" />
  </div>

  <!-- Sticky Content (fuori blu, su giallo) -->
  <div shellStickyYellow class="shell-default-sticky">
    <ng-content select="[shellStickyContent]" />
  </div>

  <!-- Main Content (default slot) -->
  <ng-content />

  <!-- Footer: Mascot + Tab Bar (automatici) -->
  <ng-container shellFooter>
    <app-mascot-peek (mascotTapped)="onMascotTapped()" />
    <app-bottom-tab-bar [tabs]="tabs" [activeTabId]="activeTabId" />
  </ng-container>

</app-tab-page-shell>

<!-- Fiuto AI Concierge Bottom Sheet -->
<app-mascot-bottom-sheet
  [isOpen]="showMascotSheet()"
  [messages]="mascotMessages()"
  [aiMessage]="mascotAiMessage()"
  [hideMascot]="true"
  [enableVoice]="true"
  (closed)="onMascotSheetClosed()"
  (chatMessage)="onChatMessage($event)" />
