<div class="events-widget">
  <div class="events-widget__header">
    @if (showNotificationBell) {
      <button
        class="events-widget__bell"
        (click)="onNotificationClick()"
        aria-label="Calendario e notifiche"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
        </svg>
        @if (notificationCount > 0) {
          <span class="events-widget__badge">{{ notificationCount }}</span>
        }
      </button>
    }
    <h3 class="events-widget__title">{{ title }}</h3>
  </div>

  @if (events.length === 0) {
    <p class="events-widget__empty">{{ emptyMessage }}</p>
  } @else {
    <ul class="events-widget__list">
      @for (event of displayedEvents; track event.title) {
        <li class="events-widget__item" (click)="onEventClick(event)">
          @if (event.icon) {
            <span class="events-widget__icon">{{ event.icon }}</span>
          }
          <span class="events-widget__item-title">{{ event.title }}</span>
          <span class="events-widget__item-date">{{ event.date }}</span>
        </li>
      }
    </ul>

    @if (hasMoreEvents) {
      <button class="events-widget__view-all" (click)="onViewAll()">
        Vedi tutti
      </button>
    }
  }
</div>
