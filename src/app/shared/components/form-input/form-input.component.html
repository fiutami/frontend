<div class="form-group">
  <label
    *ngIf="label"
    class="form-label"
    [for]="inputId"
  >
    {{ label }}
  </label>

  <div class="form-input-wrapper" [class.form-input-wrapper--password]="isPasswordType">
    <input
      [id]="inputId"
      [type]="actualType"
      [class]="inputClasses.join(' ')"
      [class.form-input--has-toggle]="isPasswordType"
      [placeholder]="placeholder"
      [value]="value"
      [disabled]="disabled"
      [autocomplete]="autocomplete"
      [attr.maxlength]="maxlength"
      [attr.aria-invalid]="hasError"
      [attr.aria-describedby]="showError ? inputId + '-error' : (showHint ? inputId + '-hint' : null)"
      (input)="onInputChange($event)"
      (blur)="onInputBlur()"
      (focus)="onInputFocus()"
    />
    <button
      *ngIf="isPasswordType"
      type="button"
      class="form-input-toggle"
      (click)="togglePasswordVisibility()"
      [attr.aria-label]="(showPassword ? 'common.hidePassword' : 'common.showPassword') | translate"
      tabindex="-1">
      <!-- Eye open (password hidden) -->
      <svg *ngIf="!showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
      <!-- Eye closed (password visible) -->
      <svg *ngIf="showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
        <line x1="1" y1="1" x2="23" y2="23"/>
      </svg>
    </button>
  </div>

  <span
    *ngIf="showHint"
    [id]="inputId + '-hint'"
    class="form-hint form-hint--visible"
  >
    {{ hint }}
  </span>

  <span
    *ngIf="showError"
    [id]="inputId + '-error'"
    class="form-error"
    role="alert"
  >
    {{ errorMessage }}
  </span>

  <span
    *ngIf="showCharCounter"
    class="form-char-counter"
    [class.form-char-counter--warning]="isNearLimit"
    [attr.aria-live]="isNearLimit ? 'polite' : null"
  >
    {{ charCounterText }}
  </span>
</div>
