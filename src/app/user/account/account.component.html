<div class="account-page">
  <!-- Header -->
  <header class="account-header">
    <button class="back-btn" (click)="goBack()" aria-label="Torna indietro">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <h1 class="account-header__title">Account</h1>
  </header>

  <!-- Profile Section -->
  <section class="profile-section">
    <div class="avatar-container">
      <div class="avatar">
        <img
          src="assets/images/default-avatar.png"
          [alt]="userFullName"
          class="avatar__image"
        />
      </div>
      <button class="avatar-edit" (click)="onEditAvatar()" aria-label="Modifica foto profilo">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <h2 class="profile-name">{{ userFullName }}</h2>
    <p class="profile-email">{{ user?.email || 'madisons@example.com' }}</p>
    <p class="profile-birthday">Birthday: April 1st</p>
  </section>

  <!-- Pet Stats Box -->
  <div class="pet-stats">
    <div class="pet-stat">
      <span class="pet-stat__value">{{ pet.weight }} Kg</span>
      <span class="pet-stat__label">Peso</span>
    </div>
    <div class="pet-stat-divider"></div>
    <div class="pet-stat">
      <span class="pet-stat__value">{{ pet.age }}</span>
      <span class="pet-stat__label">Anni</span>
    </div>
    <div class="pet-stat-divider"></div>
    <div class="pet-stat">
      <span class="pet-stat__value">{{ pet.petAge }}</span>
      <span class="pet-stat__label">Eta Pet</span>
    </div>
    <div class="pet-stat-divider"></div>
    <div class="pet-stat">
      <span class="pet-stat__value">{{ pet.sex }}</span>
      <span class="pet-stat__label">Sesso</span>
    </div>
  </div>

  <!-- Form Section -->
  <form [formGroup]="userForm" (ngSubmit)="saveProfile()" class="account-form">
    <div class="form-group">
      <label class="form-label">Nome</label>
      <div class="form-input-wrapper">
        <input
          type="text"
          formControlName="fullName"
          class="form-input"
          placeholder="Il tuo nome"
        />
        <button type="button" class="input-arrow" aria-label="Modifica">
          <svg width="6" height="12" viewBox="0 0 6 12" fill="none">
            <path d="M1 1L5 6L1 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Email</label>
      <div class="form-input-wrapper">
        <input
          type="email"
          formControlName="email"
          class="form-input form-input--readonly"
          readonly
        />
        <button type="button" class="input-arrow" aria-label="Visualizza">
          <svg width="6" height="12" viewBox="0 0 6 12" fill="none">
            <path d="M1 1L5 6L1 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Animale domestico</label>
      <div class="form-input-wrapper">
        <input
          type="text"
          formControlName="petName"
          class="form-input"
          placeholder="Nome del tuo pet"
        />
        <button type="button" class="input-arrow" aria-label="Modifica">
          <svg width="6" height="12" viewBox="0 0 6 12" fill="none">
            <path d="M1 1L5 6L1 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <button type="button" class="add-pet-link" (click)="addPet()">
      Aggiungi animale domestico
    </button>
    <div class="add-pet-underline"></div>

    <!-- Success Message -->
    <div class="success-message" *ngIf="successMessage">
      {{ successMessage }}
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn-submit"
      [disabled]="userForm.invalid || isLoading"
    >
      {{ isLoading ? 'Salvataggio...' : 'Aggiorna Profilo' }}
    </button>
  </form>
</div>
