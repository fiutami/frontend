<div class="settings">
  <h1 class="settings__title">Impostazioni</h1>
  <p class="settings__subtitle">Personalizza le tue preferenze</p>

  <!-- Loading State -->
  <div class="settings__loading" *ngIf="isLoading">
    <div class="spinner"></div>
    <span>Caricamento impostazioni...</span>
  </div>

  <!-- Messages -->
  <div class="settings__message settings__message--success" *ngIf="successMessage">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
      <polyline points="22 4 12 14.01 9 11.01"></polyline>
    </svg>
    {{ successMessage }}
  </div>

  <div class="settings__message settings__message--error" *ngIf="errorMessage">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="15" y1="9" x2="9" y2="15"></line>
      <line x1="9" y1="9" x2="15" y2="15"></line>
    </svg>
    {{ errorMessage }}
  </div>

  <form [formGroup]="settingsForm" (ngSubmit)="onSubmit()" *ngIf="!isLoading">
    <!-- Notifications Section -->
    <section class="settings__section">
      <h2 class="settings__section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
        Notifiche
      </h2>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Notifiche Email</span>
          <span class="settings__option-desc">Ricevi aggiornamenti importanti via email</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="emailNotifications">
          <span class="toggle__slider"></span>
        </label>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Notifiche Push</span>
          <span class="settings__option-desc">Ricevi notifiche push sul browser</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="pushNotifications">
          <span class="toggle__slider"></span>
        </label>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Email Marketing</span>
          <span class="settings__option-desc">Ricevi offerte e novità sui nostri servizi</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="marketingEmails">
          <span class="toggle__slider"></span>
        </label>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Digest Settimanale</span>
          <span class="settings__option-desc">Ricevi un riepilogo settimanale delle attività</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="weeklyDigest">
          <span class="toggle__slider"></span>
        </label>
      </div>
    </section>

    <!-- Privacy Section -->
    <section class="settings__section">
      <h2 class="settings__section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        Privacy
      </h2>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Profilo Pubblico</span>
          <span class="settings__option-desc">Rendi il tuo profilo visibile a tutti</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="profilePublic">
          <span class="toggle__slider"></span>
        </label>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Mostra Email</span>
          <span class="settings__option-desc">Mostra la tua email agli altri utenti</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="showEmail">
          <span class="toggle__slider"></span>
        </label>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Mostra Telefono</span>
          <span class="settings__option-desc">Mostra il tuo numero di telefono</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="showPhone">
          <span class="toggle__slider"></span>
        </label>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Ricerca per Email</span>
          <span class="settings__option-desc">Permetti di trovarti cercando la tua email</span>
        </div>
        <label class="toggle">
          <input type="checkbox" formControlName="allowSearchByEmail">
          <span class="toggle__slider"></span>
        </label>
      </div>
    </section>

    <!-- Preferences Section -->
    <section class="settings__section">
      <h2 class="settings__section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
        Preferenze
      </h2>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Lingua</span>
          <span class="settings__option-desc">Seleziona la lingua dell'interfaccia</span>
        </div>
        <select formControlName="language" class="settings__select">
          <option value="it">Italiano</option>
          <option value="en">English</option>
        </select>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Fuso Orario</span>
          <span class="settings__option-desc">Seleziona il tuo fuso orario</span>
        </div>
        <select formControlName="timezone" class="settings__select">
          <option value="Europe/Rome">Roma (CET)</option>
          <option value="Europe/London">Londra (GMT)</option>
          <option value="America/New_York">New York (EST)</option>
          <option value="America/Los_Angeles">Los Angeles (PST)</option>
          <option value="Asia/Tokyo">Tokyo (JST)</option>
        </select>
      </div>

      <div class="settings__option">
        <div class="settings__option-info">
          <span class="settings__option-label">Tema</span>
          <span class="settings__option-desc">Scegli il tema dell'applicazione</span>
        </div>
        <select formControlName="theme" class="settings__select">
          <option value="light">Chiaro</option>
          <option value="dark">Scuro</option>
          <option value="system">Sistema</option>
        </select>
      </div>
    </section>

    <!-- Save Button -->
    <div class="settings__actions">
      <button
        type="submit"
        class="btn btn--primary"
        [disabled]="isSaving"
      >
        <span *ngIf="!isSaving">Salva Impostazioni</span>
        <span *ngIf="isSaving">Salvataggio...</span>
      </button>
    </div>
  </form>
</div>
