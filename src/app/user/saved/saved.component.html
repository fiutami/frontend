<div class="saved-page">
  <!-- Header -->
  <header class="saved-header">
    <div class="saved-header__top">
      <button class="saved-header__back" (click)="goBack()">
        <svg width="34" height="34" viewBox="0 0 34 34" fill="none">
          <circle cx="17" cy="17" r="17" fill="white"/>
          <path d="M20 10L13 17L20 24" stroke="#4A74F0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <h1 class="saved-header__title">Salvati</h1>
    </div>

    <p class="saved-header__subtitle">
      Tieni vicino ciò che conta.<br>
      Qui ci sono i tuoi preferiti in FIUTAMI.
    </p>

    <!-- Search Bar -->
    <div class="saved-header__search">
      <div class="search-input">
        <svg class="search-input__icon" width="18" height="18" viewBox="0 0 18 18" fill="none">
          <circle cx="8" cy="8" r="6" stroke="white" stroke-width="1.5"/>
          <path d="M13 13L16 16" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input
          type="text"
          class="search-input__field"
          [placeholder]="'user.saved.searchPlaceholder' | translate"
          [(ngModel)]="searchQuery"
          (input)="onSearch(searchQuery)"
        />
        <button class="search-input__filter">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path d="M2 4H16M4 9H14M6 14H12" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Content -->
  <main class="saved-content">
    <!-- Section Title -->
    <div class="saved-content__header">
      <span class="saved-content__label">Salvati</span>
      <div class="saved-content__line"></div>

      <!-- Add Button -->
      <button class="saved-content__add" (click)="addNew()">
        <svg width="39" height="38" viewBox="0 0 39 38" fill="none">
          <circle cx="19.5" cy="19" r="19" fill="#F5F5F5"/>
          <path d="M19.5 12V26M12.5 19H26.5" stroke="#4A74F0" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <!-- Empty State -->
    <div class="saved-empty" *ngIf="isEmpty">
      <p class="saved-empty__text">
        Crea le tue cartelle e organizza ciò che ami.
        Tutto FIUTAMI, sempre a portata di mano.
      </p>
      <button class="saved-empty__btn" (click)="explorePlaces()">
        Esplora mappa
      </button>
    </div>

    <!-- Categories Grid -->
    <div class="saved-grid" *ngIf="!isEmpty">
      <div
        class="saved-card"
        *ngFor="let category of filteredCategories"
        (click)="openCategory(category)"
      >
        <div class="saved-card__image">
          <img [src]="category.imageUrl" [alt]="category.title" onerror="this.src='assets/images/placeholder-category.jpg'"/>
          <div class="saved-card__overlay"></div>
        </div>
        <div class="saved-card__footer">
          <span class="saved-card__title">{{ category.title }}</span>
          <button class="saved-card__edit" (click)="editCategory(category, $event)">
            <svg width="26" height="23" viewBox="0 0 26 23" fill="none">
              <path d="M12 3H4C2.89543 3 2 3.89543 2 5V19C2 20.1046 2.89543 21 4 21H18C19.1046 21 20 20.1046 20 19V11" stroke="#4A74F0" stroke-width="2" stroke-linecap="round"/>
              <path d="M17.5 2.5L21.5 6.5L13 15H9V11L17.5 2.5Z" stroke="#4A74F0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </main>
</div>
