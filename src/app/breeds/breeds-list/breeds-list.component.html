<div class="breeds-page">
  <!-- Decorative Header Background -->
  <div class="breeds-page__header-bg">
    <div class="breeds-page__header-shape"></div>
    <img
      src="assets/images/logo-fiutami.png"
      alt="Fiutami Logo"
      class="breeds-page__logo" />
  </div>

  <!-- Navigation Buttons -->
  <button
    type="button"
    class="breeds-page__btn-back"
    (click)="onBack()"
    [attr.aria-label]="'breeds.back' | translate">
    <img src="assets/images/species/btn-back.svg" alt="" />
  </button>

  <app-avatar-button size="medium" class="breeds-page__btn-drawer"></app-avatar-button>

  <!-- Species Selector Switch -->
  <div class="breeds-page__selector">
    <app-species-selector
      [label]="currentLabel"
      (previous)="onPreviousView()"
      (next)="onNextView()">
    </app-species-selector>
  </div>

  <!-- Title Section -->
  <div class="breeds-page__title">
    <h1>{{ 'breeds.subtitle' | translate }}</h1>
    <p>{{ 'breeds.description' | translate }}</p>
  </div>

  <!-- Loading State -->
  @if (isLoading() && species().length === 0) {
    <div class="breeds-page__loading">
      <span class="material-symbols-outlined breeds-page__spinner">progress_activity</span>
    </div>
  }

  <!-- Error State -->
  @if (error() && species().length === 0) {
    <div class="breeds-page__error">
      <p>{{ 'breeds.error_unavailable' | translate }}</p>
      <button
        type="button"
        class="breeds-page__retry-btn"
        [disabled]="isLoading()"
        (click)="onRetry()">
        {{ 'breeds.retry' | translate }}
      </button>
    </div>
  }

  <!-- Species Grid -->
  @if (species().length > 0) {
    <div class="breeds-page__grid-container">
      <div class="breeds-page__grid">
        @for (item of species(); track trackBySpeciesId($index, item)) {
          <app-species-card
            [label]="item.name"
            [image]="item.imageUrl"
            [smallLabel]="isSmallLabel(item.name)"
            (clicked)="onSpeciesClick(item)">
          </app-species-card>
        }
      </div>
    </div>
  }

  <!-- Interactive Mascot -->
  <div class="breeds-page__mascot">
    <div class="breeds-page__mascot-bubble">
      <app-speech-bubble variant="default" tailPosition="right">
        <span class="breeds-page__mascot-text">
          il Fiuta ti<br />istruisce
        </span>
      </app-speech-bubble>
    </div>
    <img
      src="assets/images/species/mascot-fiuto.svg"
      alt="Fiuto mascot"
      class="breeds-page__mascot-image" />
  </div>

  <!-- Bottom Tab Bar -->
  <app-bottom-tab-bar
    [tabs]="tabs"
    [showLabels]="false"
    [safeArea]="true">
  </app-bottom-tab-bar>
</div>
