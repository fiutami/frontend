<div class="forgot-password">
  <!-- Background Image with Overlay - Optimized with responsive WebP/AVIF -->
  <div class="forgot-password__background">
    <picture>
      <!-- AVIF: Best compression with responsive sizes (14-57KB vs 1.4MB PNG) -->
      <source
        srcset="assets/images/auth-bg-480w.avif 480w,
                assets/images/auth-bg-768w.avif 768w,
                assets/images/auth-bg-1280w.avif 1280w,
                assets/images/auth-bg.avif 1920w"
        sizes="100vw"
        type="image/avif">
      <!-- WebP: Wide support with responsive sizes -->
      <source
        srcset="assets/images/auth-bg-480w.webp 480w,
                assets/images/auth-bg-768w.webp 768w,
                assets/images/auth-bg-1280w.webp 1280w,
                assets/images/auth-bg.webp 1920w"
        sizes="100vw"
        type="image/webp">
      <!-- PNG: Fallback -->
      <img
        src="assets/images/auth-bg.png"
        alt=""
        class="forgot-password__background-image"
        role="presentation"
        loading="eager"
        fetchpriority="high"
        decoding="async" />
    </picture>
    <div class="forgot-password__overlay" aria-hidden="true"></div>
  </div>

  <!-- Back Button (Top-Left) -->
  <app-icon-button
    class="forgot-password__back"
    variant="glass"
    ariaLabel="Torna indietro"
    (clicked)="onBackClick()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </app-icon-button>

  <!-- Main Content -->
  <div class="forgot-password__content">
    <app-auth-card>
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password__form">
        <h2 class="forgot-password__title">Password Dimenticata</h2>
        <p class="forgot-password__description">
          Inserisci la tua email e ti invieremo un codice per reimpostare la password.
        </p>

        <!-- Email Input -->
        <app-form-input
          label="Email"
          type="email"
          formControlName="email"
          placeholder="inserisci la tua email"
          autocomplete="email"
          [hasError]="!!(email?.invalid && email?.touched)"
          [errorMessage]="getEmailError()">
        </app-form-input>

        <!-- Submit Button -->
        <app-button
          variant="primary"
          type="submit"
          [fullWidth]="true"
          [disabled]="forgotPasswordForm.invalid"
          [loading]="isSubmitting">
          Invia Codice
        </app-button>

        <!-- Error Message -->
        <div *ngIf="errorMessage" class="forgot-password__error" role="alert">
          {{ errorMessage }}
        </div>
      </form>
    </app-auth-card>
  </div>
</div>
