<div class="login">
  <!-- Background Image with Overlay - Optimized with responsive WebP/AVIF -->
  <div class="login__background">
    <picture>
      <!-- AVIF: Best compression with responsive sizes (14-57KB vs 1.4MB PNG) -->
      <source
        srcset="assets/images/auth-bg-480w.avif 480w,
                assets/images/auth-bg-768w.avif 768w,
                assets/images/auth-bg-1280w.avif 1280w,
                assets/images/auth-bg.avif 1920w"
        sizes="100vw"
        type="image/avif">
      <!-- WebP: Wide support with responsive sizes -->
      <source
        srcset="assets/images/auth-bg-480w.webp 480w,
                assets/images/auth-bg-768w.webp 768w,
                assets/images/auth-bg-1280w.webp 1280w,
                assets/images/auth-bg.webp 1920w"
        sizes="100vw"
        type="image/webp">
      <!-- PNG: Fallback -->
      <img
        src="assets/images/auth-bg.png"
        alt=""
        class="login__background-image"
        role="presentation"
        loading="eager"
        fetchpriority="high"
        decoding="async" />
    </picture>
    <div class="login__overlay" aria-hidden="true"></div>
  </div>

  <!-- Back Button (Top-Left) -->
  <app-icon-button
    class="login__back"
    variant="glass"
    [ariaLabel]="'common.back' | translate"
    (clicked)="onBackClick()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </app-icon-button>

  <!-- Main Content -->
  <div class="login__content">
    <app-auth-card>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login__form">
        <h2 class="login__title">{{ 'auth.loginTitle' | translate }}</h2>

        <!-- Email Input -->
        <app-form-input
          [label]="'auth.email' | translate"
          type="email"
          formControlName="email"
          [placeholder]="'auth.emailPlaceholder' | translate"
          autocomplete="email"
          [hasError]="!!(email?.invalid && email?.touched)"
          [errorMessage]="getEmailError()">
        </app-form-input>

        <!-- Password Input -->
        <app-form-input
          [label]="'auth.password' | translate"
          type="password"
          formControlName="password"
          [placeholder]="'auth.passwordPlaceholder' | translate"
          autocomplete="current-password"
          [hasError]="!!(password?.invalid && password?.touched)"
          [errorMessage]="getPasswordError()">
        </app-form-input>

        <!-- Forgot Password Link -->
        <div class="login__forgot">
          <button
            type="button"
            class="login__forgot-link"
            (click)="onForgotPasswordClick()">
            {{ 'auth.forgotPassword' | translate }}
          </button>
        </div>

        <!-- Submit Button -->
        <app-button
          variant="primary"
          type="submit"
          [fullWidth]="true"
          [disabled]="loginForm.invalid"
          [loading]="isSubmitting">
          {{ 'auth.loginButton' | translate }}
        </app-button>

        <!-- Error Message -->
        <div *ngIf="errorMessage" class="login__error" role="alert">
          {{ errorMessage }}
        </div>
      </form>

      <!-- Social Login -->
      <app-social-login (providerSelected)="onSocialLoginClick($event)"></app-social-login>
    </app-auth-card>
  </div>
</div>
