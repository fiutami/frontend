<div class="register-pet">
  <!-- Header -->
  <header class="register-pet__header">
    <app-back-button
      variant="solid"
      (clicked)="onBack()">
    </app-back-button>
  </header>

  <!-- Main content -->
  <main class="register-pet__content">
    <h1 class="register-pet__title">Registra il tuo amico peloso!</h1>

    <!-- Error message -->
    @if (errorMessage()) {
      <div class="register-pet__error">
        {{ errorMessage() }}
      </div>
    }

    <!-- Form -->
    <form
      class="register-pet__form"
      [formGroup]="petForm"
      (ngSubmit)="onSubmit()">

      <!-- Nome -->
      <div class="register-pet__field">
        <label class="register-pet__label" for="nome">
          Nome <span class="register-pet__required">*</span>
        </label>
        <input
          type="text"
          id="nome"
          formControlName="nome"
          class="register-pet__input"
          placeholder="Come si chiama?"
          [class.register-pet__input--error]="getFieldError('nome')" />
        @if (getFieldError('nome')) {
          <span class="register-pet__field-error">{{ getFieldError('nome') }}</span>
        }
      </div>

      <!-- Specie -->
      <div class="register-pet__field">
        <label class="register-pet__label" for="specie">
          Specie <span class="register-pet__required">*</span>
        </label>
        <select
          id="specie"
          formControlName="specie"
          class="register-pet__select"
          [class.register-pet__select--error]="getFieldError('specie')">
          <option value="" disabled>Seleziona specie</option>
          @for (option of speciesOptions; track option.value) {
            <option [value]="option.value">{{ option.label }}</option>
          }
        </select>
        @if (getFieldError('specie')) {
          <span class="register-pet__field-error">{{ getFieldError('specie') }}</span>
        }
      </div>

      <!-- Razza -->
      <div class="register-pet__field">
        <label class="register-pet__label" for="razza">Razza</label>
        <input
          type="text"
          id="razza"
          formControlName="razza"
          class="register-pet__input"
          placeholder="Es. Labrador, Persiano..." />
      </div>

      <!-- Sesso -->
      <div class="register-pet__field">
        <label class="register-pet__label">
          Sesso <span class="register-pet__required">*</span>
        </label>
        <div class="register-pet__radio-group">
          <label class="register-pet__radio">
            <input
              type="radio"
              formControlName="sesso"
              value="male" />
            <span class="register-pet__radio-label">Maschio</span>
          </label>
          <label class="register-pet__radio">
            <input
              type="radio"
              formControlName="sesso"
              value="female" />
            <span class="register-pet__radio-label">Femmina</span>
          </label>
        </div>
        @if (getFieldError('sesso')) {
          <span class="register-pet__field-error">{{ getFieldError('sesso') }}</span>
        }
      </div>

      <!-- Data di nascita -->
      <div class="register-pet__field">
        <label class="register-pet__label" for="dataNascita">Data di nascita</label>
        <input
          type="date"
          id="dataNascita"
          formControlName="dataNascita"
          class="register-pet__input" />
      </div>

      <!-- Peso -->
      <div class="register-pet__field">
        <label class="register-pet__label" for="peso">Peso (kg)</label>
        <input
          type="number"
          id="peso"
          formControlName="peso"
          class="register-pet__input"
          placeholder="Es. 5.5"
          step="0.1"
          min="0" />
      </div>

      <!-- Colore -->
      <div class="register-pet__field">
        <label class="register-pet__label" for="colore">Colore</label>
        <input
          type="text"
          id="colore"
          formControlName="colore"
          class="register-pet__input"
          placeholder="Es. Nero, Bianco e marrone..." />
      </div>

      <!-- Segni particolari -->
      <div class="register-pet__field">
        <label class="register-pet__label" for="segniParticolari">Segni particolari</label>
        <textarea
          id="segniParticolari"
          formControlName="segniParticolari"
          class="register-pet__textarea"
          placeholder="Macchie, cicatrici, particolarita..."
          rows="3"></textarea>
      </div>

      <!-- Foto (placeholder) -->
      <div class="register-pet__field">
        <label class="register-pet__label">Foto</label>
        <div class="register-pet__photo-placeholder">
          <span class="material-icons">add_a_photo</span>
          <span>Aggiungi foto (presto disponibile)</span>
        </div>
      </div>

      <!-- Submit button -->
      <button
        type="submit"
        class="register-pet__submit"
        [disabled]="isLoading()">
        @if (isLoading()) {
          <span class="register-pet__spinner"></span>
          Registrazione...
        } @else {
          Continua
        }
      </button>
    </form>
  </main>
</div>
