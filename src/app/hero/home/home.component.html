<div class="home">
  <!-- Background Image with Overlay -->
  <app-page-background
    imageName="auth-bg"
    overlayOpacity="light">
  </app-page-background>

  <!-- Header -->
  <header class="home__header">
    <!-- Spacer per bilanciare il layout -->
    <div class="home__header-spacer"></div>

    <div class="home__header-actions">
      <!-- Menu avatar (apre drawer con profilo e impostazioni) -->
      <button
        class="home__menu-avatar"
        (click)="openDrawer()"
        aria-label="Apri menu profilo"
      >
        @if (showInitials()) {
          <div class="home__menu-avatar-initials" [attr.aria-label]="petName() + ' avatar'">
            {{ initials() }}
          </div>
        } @else {
          <img
            [src]="avatarUrl()"
            [alt]="petName() + ' avatar'"
            class="home__menu-avatar-img"
            loading="lazy"
          />
        }
      </button>
    </div>
  </header>

  <!-- Main content -->
  <main class="home__content">
    <!-- Search bar -->
    <div class="home__search-wrapper">
      <app-search-box
        placeholder="Cosa posso fiutare per te?"
        variant="glass"
        [value]="searchQuery"
        (search)="onSearch($event)">
      </app-search-box>
    </div>

    <!-- Upcoming events widget con campanella notifiche -->
    <div class="home__events-wrapper">
      <app-events-widget
        title="Prossimi eventi"
        [events]="upcomingEvents"
        emptyMessage="Non c'Ã¨ nessun evento in programma."
        [showNotificationBell]="true"
        [notificationCount]="notificationCount"
        (eventClick)="onEventClick($event)"
        (viewAllClick)="onViewAllEvents()"
        (notificationClick)="navigateToCalendar()">
      </app-events-widget>
    </div>
  </main>

  <!-- Bottom Tab Bar (Blue) -->
  <app-bottom-tab-bar [tabs]="tabs" [activeTabId]="'home'"></app-bottom-tab-bar>
</div>
