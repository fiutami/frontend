<app-tab-page-shell-default
  activeTabId="home"
  [showBack]="false"
  backgroundVariant="image"
  imageName="auth-bg"
  overlayOpacity="light">

  <!-- Main content -->
  <div class="home__content">
    <!-- Greeting Section -->
    <section class="home__greeting">
      <h1 class="home__greeting-title">
        Ciao {{ userName() }}!
      </h1>
      @if (isPathA() && petName()) {
        <p class="home__greeting-subtitle">Come sta {{ petName() }} oggi?</p>
      } @else if (isPathB()) {
        <p class="home__greeting-subtitle">Pronto a trovare il tuo compagno?</p>
      }
    </section>

    <!-- Search bar + Notification Bell -->
    <div class="home__search-row">
      <app-search-box
        class="home__search"
        placeholder="Cosa posso fiutare per te?"
        variant="glass"
        [value]="searchQuery"
        (search)="onSearch($event)">
      </app-search-box>

      <app-notification-bell [count]="unreadNotifications()"></app-notification-bell>
    </div>
  </div>

  <!-- Mascot Bottom Sheet (AI Mode) - fuori dalla shell perchÃ© custom -->
  <app-mascot-bottom-sheet
    [isOpen]="showMascotSheet()"
    [hideMascot]="true"
    [suggestions]="mascotSuggestions()"
    [aiMessage]="'Ciao! Ecco cosa ho trovato per te oggi...'"
    (closed)="closeMascotSheet()"
    (suggestionAction)="onMascotSuggestionClick($event)"
    (aiModeChange)="onAiModeChange($event)"
    (chatMessage)="onChatMessage($event)">
  </app-mascot-bottom-sheet>

</app-tab-page-shell-default>
