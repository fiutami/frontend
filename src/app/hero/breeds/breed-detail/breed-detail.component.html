<app-tab-page-shell-blue
  [title]="breedName()"
  activeTabId="species"
  [showBack]="true"
  (backClicked)="goBack()">

  <!-- Hero + Identity (non-scrolling, overlaps blue header via sticky slot) -->
  <div shellStickyContent>
    @if (breed() && !isLoading()) {
      <section class="breed-hero">
        <div class="breed-hero__circle">
          <img
            [src]="heroImageUrl()"
            [alt]="breedName()"
            class="breed-hero__image"
            (error)="$any($event.target).src='assets/images/breeds/placeholder-breed.png'"
            loading="eager">
        </div>
      </section>

      <section class="breed-identity">
        <h1 class="breed-identity__name">{{ breed()!.name }}</h1>

        <div class="breed-identity__badges">
          @if (breed()!.origin) {
            <span class="breed-badge breed-badge--origin">
              <span class="material-icons">star</span>
              Origin: {{ originLabel() }}
            </span>
          }

          @if (breed()!.recognition) {
            <span class="breed-badge breed-badge--fci">
              <span class="material-icons">check_circle</span>
              {{ breed()!.recognition }}
            </span>
          } @else {
            <span class="breed-badge breed-badge--fci">
              <span class="material-icons">check_circle</span>
              FCI Riconosciuta
            </span>
          }
        </div>

        @if (breed()!.history) {
          <p class="breed-identity__description">{{ breed()!.history }}</p>
        }
      </section>
    }
  </div>

  <!-- Loading state -->
  @if (isLoading()) {
    <div class="detail-loading">
      <div class="detail-loading__spinner"></div>
      <p>Caricamento dettagli...</p>
    </div>
  }

  <!-- Error state -->
  @if (!breed() && !isLoading()) {
    <div class="detail-error">
      <span class="material-icons">error_outline</span>
      <p>Razza non trovata</p>
      <button class="detail-error__retry" (click)="goBack()">
        Torna indietro
      </button>
    </div>
  }

  <!-- Navigation buttons (scrollable) -->
  @if (breed() && !isLoading()) {
    <section class="breed-nav">
      @for (section of infoSections(); track trackBySection($index, section)) {
        <button class="breed-nav__item" (click)="goToSection(section.id)">
          <span class="material-icons breed-nav__icon">{{ section.icon }}</span>
          <span class="breed-nav__title">{{ section.title }}</span>
          <span class="material-icons breed-nav__arrow">chevron_right</span>
        </button>
      }
    </section>
  }

</app-tab-page-shell-blue>
