<app-tab-page-shell-blue
  [title]="pageTitle"
  activeTabId="home"
  [showBack]="true"
  (backClicked)="goBack()">

  <!-- Content -->
  <div class="activity-content" [attr.data-viewport]="viewportSize()" data-testid="activity-page">
    <!-- Loading State -->
    @if (isLoading()) {
      <div class="activity-loading">
        <div class="activity-loading__spinner"></div>
        <p class="activity-loading__text">{{ 'drawerActivity.loading' | translate }}</p>
      </div>
    }

    <!-- Error State -->
    @else if (hasError()) {
      <div class="activity-error">
        <span class="material-icons activity-error__icon">error_outline</span>
        <p class="activity-error__text">{{ 'drawerActivity.error' | translate }}</p>
        <button class="activity-error__retry" (click)="retry()" type="button">
          {{ 'drawerActivity.retry' | translate }}
        </button>
      </div>
    }

    <!-- Empty State -->
    @else if (activities().length === 0) {
      <div class="activity-empty">
        <span class="material-icons activity-empty__icon">history</span>
        <p class="activity-empty__text">{{ 'drawerActivity.empty' | translate }}</p>
        <p class="activity-empty__subtext">{{ 'drawerActivity.emptySubtext' | translate }}</p>
      </div>
    }

    <!-- Activities List -->
    @else {
      <ul class="activity-list" role="list">
        @for (activity of activities(); track activity.id) {
          <li class="activity-item" [class]="getActivityTypeClass(activity.type)">
            <div class="activity-item__icon">
              <span class="material-icons">{{ activity.icon }}</span>
            </div>
            <div class="activity-item__content">
              <h3 class="activity-item__title">{{ activity.title }}</h3>
              <p class="activity-item__description">{{ activity.description }}</p>
              <time class="activity-item__time" [attr.datetime]="activity.timestamp.toISOString()">
                {{ formatTime(activity.timestamp) }}
              </time>
            </div>
          </li>
        }
      </ul>
    }
  </div>

</app-tab-page-shell-blue>
