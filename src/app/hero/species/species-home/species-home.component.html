<div class="species-home">
  <!-- Background -->
  <app-page-background
    imageName="auth-bg"
    overlayOpacity="medium">
  </app-page-background>

  <!-- Header -->
  <header class="species-home__header">
    <button
      class="species-home__back-btn"
      (click)="goBack()"
      aria-label="Torna indietro"
    >
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
      </svg>
    </button>
    <h1 class="species-home__title">Specie</h1>
    <div class="species-home__header-spacer"></div>
  </header>

  <!-- Main content -->
  <main class="species-home__content">
    <p class="species-home__subtitle">
      Esplora tutte le specie di animali domestici
    </p>

    @if (isLoading()) {
      <div class="species-home__loading">
        <span class="species-home__spinner"></span>
        <p>Caricamento...</p>
      </div>
    } @else {
      <div class="species-home__grid">
        @for (category of categories(); track trackByCategory($index, category)) {
          <button
            class="species-home__card"
            [class.species-home__card--selected]="selectedCategory() === category.id"
            [style.--card-color]="category.color"
            (click)="selectCategory(category)"
          >
            <div class="species-home__card-icon">
              <span class="material-icons">{{ category.icon }}</span>
            </div>
            <h3 class="species-home__card-name">{{ category.name }}</h3>
            <span class="species-home__card-count">{{ category.count }} razze</span>
          </button>
        }
      </div>
    }
  </main>

  <!-- Bottom Tab Bar -->
  <app-bottom-tab-bar [tabs]="tabs" [activeTabId]="'species'"></app-bottom-tab-bar>
</div>
