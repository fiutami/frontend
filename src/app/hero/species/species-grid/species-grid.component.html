<div class="species-grid">
  <!-- Engagement phrase -->
  <p class="species-grid__tagline">
    Fiuta e scopri.<br>
    <span>Ogni specie racconta qualcosa.</span>
  </p>

  <!-- Search bar -->
  <div class="species-grid__search">
    <svg class="species-grid__search-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
      <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    </svg>
    <input
      type="text"
      class="species-grid__search-input"
      placeholder="Cerca una specie..."
      [value]="searchQuery()"
      (input)="onSearchInput($event)"
    >
  </div>

  <!-- Loading state -->
  @if (isLoading()) {
    <div class="species-grid__loading">
      <span class="species-grid__spinner"></span>
      <p>Caricamento...</p>
    </div>
  } @else {
    <!-- Categories grid -->
    <div class="species-grid__cards">
      @for (category of filteredCategories; track trackByCategory($index, category)) {
        <button
          class="species-grid__card"
          [class.species-grid__card--selected]="selectedCategory() === category.id"
          [style.--card-color]="category.color"
          (click)="selectCategory(category)"
        >
          <div class="species-grid__card-icon">
            <span class="material-icons">{{ category.icon }}</span>
          </div>
          <h3 class="species-grid__card-name">{{ category.name }}</h3>
          <span class="species-grid__card-count">{{ category.count }} razze</span>
        </button>
      }
    </div>

    @if (filteredCategories.length === 0 && searchQuery()) {
      <p class="species-grid__no-results">
        Nessuna specie trovata per "{{ searchQuery() }}"
      </p>
    }
  }
</div>
